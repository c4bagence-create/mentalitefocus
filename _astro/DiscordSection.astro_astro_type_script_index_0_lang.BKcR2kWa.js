document.addEventListener("DOMContentLoaded",()=>{const M=document.getElementById("discord");let m=!1;const L=new IntersectionObserver(e=>{m=e[0].isIntersecting,m?F():y()},{threshold:.1});M&&L.observe(M),document.addEventListener("visibilitychange",()=>{document.hidden?y():m&&F()});const h=[],A=(e,t)=>{const a={callback:e,delay:t,id:null};h.push(a),m&&(a.id=setInterval(e,t))},F=()=>{h.forEach(e=>{e.id||(e.id=setInterval(e.callback,e.delay))})},y=()=>{h.forEach(e=>{e.id&&(clearInterval(e.id),e.id=null)})},s=document.getElementById("chat-messages"),f=document.getElementById("typing-indicator"),S=document.getElementById("chat-channel-name"),T=document.querySelectorAll(".channel-btn:not(.vocal)"),b=document.querySelectorAll("[data-notif-count]");let _="general";const D={annonce:[{user:"Focus Team",avatar:"F",color:"#D4AF37",msg:"ðŸš¨ Nouveau live demain 19h ! Scaling Meta Ads jusqu'Ã  10Kâ‚¬/jour",time:"Aujourd'hui"},{user:"Focus Team",avatar:"F",color:"#D4AF37",msg:"ðŸ“¢ Mise Ã  jour du Coffre : 15 nouveaux templates Notion ajoutÃ©s",time:"Hier"},{user:"Focus Team",avatar:"F",color:"#D4AF37",msg:"ðŸŽ¯ Nouveau partenariat avec un expert fiscalitÃ© ce weekend",time:"Lundi"}],rediff:[{user:"Sonny",avatar:"S",color:"#D4AF37",msg:'ðŸ“º Rediff du live Ads disponible - "Scale Ã  50K/mois"',time:"10:00"},{user:"Zaid",avatar:"Z",color:"#8B5CF6",msg:"ðŸŽ¬ Replay E-com : Comment trouver un winner en 24h",time:"11:30"},{user:"Jamel",avatar:"J",color:"#EC4899",msg:"ðŸ“¹ Rediff SMMA : Closer son premier client 3K/mois",time:"14:00"},{user:"Midou",avatar:"M",color:"#10B981",msg:"ðŸŽ¥ Live SEO de la semaine dispo dans le coffre",time:"16:45"}],live:[{user:"Sonny",avatar:"S",color:"#D4AF37",msg:"ðŸ”´ LIVE CE SOIR 21h : Audit de vos stores en direct !",time:"15:00"},{user:"Caldi",avatar:"C",color:"#EF4444",msg:"ðŸ“… Live demain 19h : Q&A Meta Ads - PrÃ©parez vos questions",time:"18:30"},{user:"Zaid",avatar:"Z",color:"#8B5CF6",msg:"ðŸŽ™ï¸ Jeudi 20h : Masterclass TikTok Ads avec invitÃ© spÃ©cial",time:"12:00"},{user:"Jamel",avatar:"J",color:"#EC4899",msg:"ðŸ”¥ Vendredi 18h : Comment closer en DM - Techniques avancÃ©es",time:"09:15"}],programme:[{user:"Focus Team",avatar:"F",color:"#D4AF37",msg:`ðŸ“† Programme Semaine 4 :
â€¢ Lundi 19h : E-com
â€¢ Mercredi 20h : Ads
â€¢ Vendredi 18h : Q&A`,time:"Dimanche"},{user:"Focus Team",avatar:"F",color:"#D4AF37",msg:"ðŸ—“ï¸ Live exceptionnel samedi 15h : Scaling 0 Ã  100K/mois",time:"Jeudi"}],general:[{user:"Thomas_Ads",avatar:"T",color:"#5865F2",msg:"Qui a testÃ© les nouvelles audiences Meta ?",time:"14:32"},{user:"Julie_Ecom",avatar:"J",color:"#EC4899",msg:"J'ai scale de 500 Ã  2Kâ‚¬/jour cette semaine ðŸ”¥",time:"14:35"},{user:"Karim_Drop",avatar:"K",color:"#F59E0B",msg:"Quelqu'un utilise CJ Dropshipping ?",time:"14:38"},{user:"Emma_SMMA",avatar:"E",color:"#10B981",msg:"Premier client Ã  3K/mois signÃ© ce matin !",time:"14:42"}],concours:[{user:"Focus Team",avatar:"F",color:"#D4AF37",msg:"ðŸ† CONCOURS : Gagne 1 mois gratuit ! Partage ton meilleur conseil business",time:"Hier"},{user:"Lucas_Crypto",avatar:"L",color:"#8B5CF6",msg:"Mon conseil : Automatise tout ce qui peut l'Ãªtre ðŸš€",time:"14:22"},{user:"Sophie_Drop",avatar:"S",color:"#F472B6",msg:"Toujours tester 10 produits minimum avant de scale",time:"15:05"}],chiffres:[{user:"Lucas_Crypto",avatar:"L",color:"#8B5CF6",msg:"ðŸ“Š Store Shopify : 12,847â‚¬ ce mois. ATH battu !",time:"12:15"},{user:"Alex_SEO",avatar:"A",color:"#06B6D4",msg:"ðŸ’° Affiliation : 4,200â‚¬ en passif ce mois",time:"13:22"},{user:"Maxime_Auto",avatar:"M",color:"#EF4444",msg:"ðŸš— Vente 911 : +18,000â‚¬ de marge nette",time:"15:45"},{user:"Emma_SMMA",avatar:"E",color:"#10B981",msg:"ðŸ’µ 3 clients signÃ©s cette semaine : 7,500â‚¬/mois rÃ©current",time:"16:30"}],ecom:[{user:"Sophie_Drop",avatar:"S",color:"#F472B6",msg:"Quel agent vous utilisez pour les bijoux ?",time:"11:20"},{user:"Nathan_Ecom",avatar:"N",color:"#22C55E",msg:"J'ai trouvÃ© un winner en beautÃ©, CTR Ã  4.2%",time:"11:45"},{user:"Julie_Ecom",avatar:"J",color:"#EC4899",msg:"CJ ou Wiio pour les dÃ©lais de livraison ?",time:"12:30"},{user:"Karim_Drop",avatar:"K",color:"#F59E0B",msg:"Ma fiche produit convertit Ã  3.8%, qui veut review ?",time:"14:15"}],ads:[{user:"Romain_Meta",avatar:"R",color:"#0081FB",msg:"ASC vs CBO sur du scale, vos retours ?",time:"10:30"},{user:"Manon_TikTok",avatar:"M",color:"#FE2C55",msg:"TikTok Ads explose en ce moment, CPM Ã  2â‚¬",time:"10:55"},{user:"Thomas_Ads",avatar:"T",color:"#5865F2",msg:"Lookalike 1% vs 3% sur une audience froide ?",time:"11:20"},{user:"Alex_Google",avatar:"A",color:"#34a853",msg:"Performance Max vs Search pour du lead gen ?",time:"13:00"}],smma:[{user:"Emma_SMMA",avatar:"E",color:"#10B981",msg:"Comment vous gÃ©rez les clients difficiles ?",time:"09:30"},{user:"Pierre_Agency",avatar:"P",color:"#8B5CF6",msg:"Quel outil pour le reporting client ? Databox ?",time:"10:15"},{user:"Marie_SMMA",avatar:"M",color:"#EC4899",msg:"Combien vous facturez pour du Meta Ads management ?",time:"11:00"}],avis:[{user:"Nathan_Ecom",avatar:"N",color:"#22C55E",msg:"â­â­â­â­â­ Focus m'a permis de passer de 0 Ã  5K/mois en 3 mois",time:"10:00"},{user:"Sophie_Drop",avatar:"S",color:"#F472B6",msg:"La communautÃ© est incroyable, toujours quelqu'un pour aider ðŸ™",time:"14:30"},{user:"Romain_Meta",avatar:"R",color:"#0081FB",msg:"Les lives sont une mine d'or, j'ai optimisÃ© mes ads grÃ¢ce Ã  Sonny",time:"16:00"}]},o={};b.forEach(e=>{const t=e.getAttribute("data-notif-count");o[t]=0});const w=e=>e==="Focus Team"?{cls:"admin",text:"ADMIN"}:e.includes("_Ecom")||e.includes("_Drop")?{cls:"ecom",text:"E-COM"}:e.includes("_Ads")||e.includes("_Meta")||e.includes("_TikTok")?{cls:"ads",text:"ADS"}:e.includes("_SMMA")?{cls:"smma",text:"SMMA"}:e.includes("_Crypto")?{cls:"crypto",text:"CRYPTO"}:e.includes("_SEO")?{cls:"seo",text:"SEO"}:e.includes("_Auto")?{cls:"auto",text:"AUTO"}:{cls:"member",text:"MEMBRE"},I=e=>{const t=e.user==="Focus Team",a=e.color||"#D4AF37",n=w(e.user),u=Math.floor(Math.random()*10)+1,O=Math.random()>.5,R=Math.floor(Math.random()*5)+1,c=document.createElement("div");c.className="message",c.style.cssText="display: flex; flex-direction: row; align-items: flex-start; gap: 12px; padding: 8px 0;";const d=document.createElement("div");d.className="msg-avatar"+(t?" admin-avatar":""),d.style.cssText=`
        width: 40px; height: 40px; min-width: 40px; min-height: 40px;
        border-radius: 50%; display: flex; align-items: center; justify-content: center;
        font-size: 14px; font-weight: 700; color: white; flex-shrink: 0;
        background-color: ${a};
      `,d.textContent=e.avatar,c.appendChild(d);const r=document.createElement("div");r.className="msg-content",r.style.cssText="flex: 1; min-width: 0; display: flex; flex-direction: column; gap: 4px;";const i=document.createElement("div");i.className="msg-header",i.style.cssText="display: flex; align-items: center; gap: 8px; flex-wrap: wrap;";const v=document.createElement("span");v.className="msg-author"+(t?" gold":""),v.style.cssText="font-weight: 600; font-size: 14px; color: "+(t?"var(--gold)":"var(--text-primary)")+";",v.textContent=e.user,i.appendChild(v);const C=document.createElement("span");C.className="role-badge "+n.cls,C.textContent=n.text,i.appendChild(C);const p=document.createElement("span");p.className="msg-time",p.style.cssText="font-size: 11px; color: var(--discord-text);",p.textContent=e.time,i.appendChild(p),r.appendChild(i);const g=document.createElement("div");g.className="msg-text",g.style.cssText="font-size: 14px; color: var(--text-secondary); line-height: 1.5;",g.textContent=e.msg,r.appendChild(g);const l=document.createElement("div");l.className="msg-reactions",l.style.cssText="display: flex; gap: 6px; margin-top: 4px; flex-wrap: wrap;";const x=document.createElement("span");if(x.className="reaction",x.textContent="ðŸ‘ "+u,l.appendChild(x),O){const E=document.createElement("span");E.className="reaction",E.textContent="ðŸ”¥ "+R,l.appendChild(E)}return r.appendChild(l),c.appendChild(r),c},B=e=>{const t=D[e]||D.general;for(;s.firstChild;)s.removeChild(s.firstChild);t.forEach((a,n)=>{setTimeout(()=>{const u=I(a);u.style.animation="messageIn 0.3s ease",s.appendChild(u),s.scrollTop=s.scrollHeight},n*400)}),setTimeout(()=>{s.appendChild(f)},t.length*400+100)},k=e=>{const t=document.querySelector('[data-notif-count="'+e+'"]');t&&e!==_&&(o[e]=(o[e]||0)+Math.floor(Math.random()*3)+1,t.textContent=o[e]>99?"99+":o[e],t.classList.add("active"))},J=e=>{const t=document.querySelector('[data-notif-count="'+e+'"]');t&&(o[e]=0,t.textContent="0",t.classList.remove("active"))};T.forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-channel");if(!t)return;T.forEach(n=>n.classList.remove("active")),e.classList.add("active");const a=e.querySelector(".channel-name");a&&S&&(S.textContent=a.textContent||"gÃ©nÃ©ral"),_=t,B(t),J(t)})}),B("general"),A(()=>{f.classList.add("active"),setTimeout(()=>{f.classList.remove("active")},3e3)},6e3);const N=["annonce","programme","concours","presentation","ecom","ads","smma","chiffres","avis"];A(()=>{const e=N[Math.floor(Math.random()*N.length)];k(e)},2e3)});
