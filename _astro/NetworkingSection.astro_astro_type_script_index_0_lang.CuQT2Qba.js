document.addEventListener("DOMContentLoaded",()=>{const b=document.getElementById("networking");let i=!1;const k=new IntersectionObserver(e=>{i=e[0].isIntersecting,i?h():p()},{threshold:.1});b&&k.observe(b),document.addEventListener("visibilitychange",()=>{document.hidden?p():i&&h()});const m=[],r=(e,t)=>{const a={callback:e,delay:t,id:null};m.push(a),i&&(a.id=setInterval(e,t))},h=()=>{m.forEach(e=>{e.id||(e.id=setInterval(e.callback,e.delay))})},p=()=>{m.forEach(e=>{e.id&&(clearInterval(e.id),e.id=null)})},I=document.querySelectorAll("[data-user]"),B=document.querySelectorAll("[data-bubble]"),s=document.getElementById("feed-messages");document.getElementById("mlc-messages");const C=document.querySelector("[data-call-duration]");let c=0;const d=["thomas","karim","julie","mehdi"],E=[{name:"Thomas_Ads",avatar:"T",color:"#5865F2",msg:"J'ai un CPC à 14 centimes, c'est bien ?"},{name:"Julie_Ecom",avatar:"J",color:"#EC4899",msg:"T'en penses quoi de ma créa ?"},{name:"Karim_Drop",avatar:"K",color:"#F59E0B",msg:"Mon CTR est à 3.2%, je scale ou pas ?"},{name:"Emma_SMMA",avatar:"E",color:"#10B981",msg:"Combien vous facturez pour du Meta Ads ?"},{name:"Lucas_SEO",avatar:"L",color:"#8B5CF6",msg:"J'ai rankée en 2 semaines sur un mot clé"},{name:"Alex_Crypto",avatar:"A",color:"#06B6D4",msg:"Qui a testé les lookalike sur TikTok ?"},{name:"Maxime_Auto",avatar:"M",color:"#EF4444",msg:"J'ai trouvé une 911 à 45K, c'est une bonne affaire ?"},{name:"Sophie_Inf",avatar:"S",color:"#F472B6",msg:"Comment vous négociez vos deals influenceurs ?"},{name:"Pierre_SMMA",avatar:"P",color:"#22C55E",msg:"Premier client signé ce matin ! 2K/mois"},{name:"Marie_Ecom",avatar:"M",color:"#A855F7",msg:"Mon produit fait 12K ce mois, merci Focus !"}],l=()=>{if(!s)return;const e=E[Math.floor(Math.random()*E.length)],t=document.createElement("div");for(t.className="feed-msg",t.innerHTML=`
        <div class="feed-avatar" style="background: ${e.color}">${e.avatar}</div>
        <div class="feed-content">
          <span class="feed-name">${e.name}</span>
          <span class="feed-text">${e.msg}</span>
        </div>
      `,s.appendChild(t),s.scrollTop=s.scrollHeight;s.children.length>5;)s.removeChild(s.firstChild)},u=document.querySelectorAll(".voice-bubble");let v=0;const g=[{name:"Thomas",avatar:"T",color:"#5865F2",text:"CPC à 0,14€ c'est bien ?"},{name:"Julie",avatar:"J",color:"#EC4899",text:"Mon CTR est à 3.2%"},{name:"Karim",avatar:"K",color:"#F59E0B",text:"Deal signé à 12K !"},{name:"Emma",avatar:"E",color:"#10B981",text:"Client fermé ce matin"},{name:"Lucas",avatar:"L",color:"#8B5CF6",text:"Top 1 Google !"},{name:"Maxime",avatar:"M",color:"#EF4444",text:"Vendu en 3h"},{name:"Alex",avatar:"A",color:"#06B6D4",text:"TikTok Ads explose"},{name:"Sophie",avatar:"S",color:"#F472B6",text:"+8K ce mois !"},{name:"Pierre",avatar:"P",color:"#22C55E",text:"2K/mois signé"},{name:"Marie",avatar:"M",color:"#A855F7",text:"12K ce mois"}],x=()=>{u.length&&(u.forEach((e,t)=>{setTimeout(()=>e.classList.remove("visible"),t*80)}),setTimeout(()=>{for(let e=0;e<6;e++){const t=(v+e)%g.length,a=g[t],o=u[e];if(o){const n=o.querySelector(".vb-avatar"),y=o.querySelector(".vb-name"),A=o.querySelector(".vb-text");n&&(n.style.background=a.color,n.textContent=a.avatar),y&&(y.textContent=a.name),A&&(A.textContent=a.text),setTimeout(()=>o.classList.add("visible"),e*150)}}v=(v+3)%g.length},400))};setTimeout(x,800),r(x,5e3),setTimeout(l,500),setTimeout(l,1500),setTimeout(l,2500),r(l,3e3);let f=754;r(()=>{f++;const e=Math.floor(f/60),t=f%60;C&&(C.textContent=`${e}:${t.toString().padStart(2,"0")}`)},1e3),r(()=>{I.forEach(a=>{const o=a.getAttribute("data-user"),n=a.querySelector("[data-status]");o===d[c]?(a.classList.add("talking"),n&&(n.textContent="Parle...")):(a.classList.remove("talking"),n&&(n.textContent="Écoute"))}),B.forEach(a=>{const o=a.getAttribute("data-bubble");a.style.opacity=o===d[c]?"1":"0.4"});const e=document.querySelector("[data-speaking-name]"),t=["Thomas_Ads","Karim_Immo","Julie_Ecom","Mehdi_Dev"];e&&(e.textContent=t[c]),c=(c+1)%d.length},3e3);const M=document.querySelector("[data-phone-time]"),S=()=>{const e=new Date,t=e.getHours().toString().padStart(2,"0"),a=e.getMinutes().toString().padStart(2,"0");M&&(M.textContent=`${t}:${a}`)};S(),r(S,6e4);const T=document.querySelector("[data-call-count]");r(()=>{if(T){const t=Math.floor(Math.random()*5)-2;T.textContent=(30+t).toString()}},8e3)});
