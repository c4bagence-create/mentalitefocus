document.addEventListener("DOMContentLoaded",()=>{const y=document.getElementById("discord");let v=!1;const I=new IntersectionObserver(e=>{v=e[0].isIntersecting,v?S():T()},{threshold:.1});y&&I.observe(y),document.addEventListener("visibilitychange",()=>{document.hidden?T():v&&S()});const x=[],F=(e,t)=>{const a={callback:e,delay:t,id:null};x.push(a),v&&(a.id=setInterval(e,t))},S=()=>{x.forEach(e=>{e.id||(e.id=setInterval(e.callback,e.delay))})},T=()=>{x.forEach(e=>{e.id&&(clearInterval(e.id),e.id=null)})},s=document.getElementById("chat-messages"),E=document.getElementById("typing-indicator"),_=document.getElementById("chat-channel-name"),L=document.querySelectorAll(".channel-btn:not(.vocal)"),k=document.querySelectorAll("[data-notif-count]");let D="general";const B={annonce:[{user:"Focus Team",avatar:"F",color:"#D4AF37",msg:"üö® Nouveau live demain 19h ! Scaling Meta Ads jusqu'√† 10K‚Ç¨/jour",time:"Aujourd'hui"},{user:"Focus Team",avatar:"F",color:"#D4AF37",msg:"üì¢ Mise √† jour du Coffre : 15 nouveaux templates Notion ajout√©s",time:"Hier"},{user:"Focus Team",avatar:"F",color:"#D4AF37",msg:"üéØ Nouveau partenariat avec un expert fiscalit√© ce weekend",time:"Lundi"}],rediff:[{user:"Sonny",avatar:"S",color:"#D4AF37",msg:'üì∫ Rediff du live Ads disponible - "Scale √† 50K/mois"',time:"10:00"},{user:"Zaid",avatar:"Z",color:"#8B5CF6",msg:"üé¨ Replay E-com : Comment trouver un winner en 24h",time:"11:30"},{user:"Jamel",avatar:"J",color:"#EC4899",msg:"üìπ Rediff SMMA : Closer son premier client 3K/mois",time:"14:00"},{user:"Midou",avatar:"M",color:"#10B981",msg:"üé• Live SEO de la semaine dispo dans le coffre",time:"16:45"}],live:[{user:"Sonny",avatar:"S",color:"#D4AF37",msg:"üî¥ LIVE CE SOIR 21h : Audit de vos stores en direct !",time:"15:00"},{user:"Caldi",avatar:"C",color:"#EF4444",msg:"üìÖ Live demain 19h : Q&A Meta Ads - Pr√©parez vos questions",time:"18:30"},{user:"Zaid",avatar:"Z",color:"#8B5CF6",msg:"üéôÔ∏è Jeudi 20h : Masterclass TikTok Ads avec invit√© sp√©cial",time:"12:00"},{user:"Jamel",avatar:"J",color:"#EC4899",msg:"üî• Vendredi 18h : Comment closer en DM - Techniques avanc√©es",time:"09:15"}],programme:[{user:"Focus Team",avatar:"F",color:"#D4AF37",msg:`üìÜ Programme Semaine 4 :
‚Ä¢ Lundi 19h : E-com
‚Ä¢ Mercredi 20h : Ads
‚Ä¢ Vendredi 18h : Q&A`,time:"Dimanche"},{user:"Focus Team",avatar:"F",color:"#D4AF37",msg:"üóìÔ∏è Live exceptionnel samedi 15h : Scaling 0 √† 100K/mois",time:"Jeudi"}],general:[{user:"Thomas_Ads",avatar:"T",color:"#5865F2",msg:"Qui a test√© les nouvelles audiences Meta ?",time:"14:32"},{user:"Julie_Ecom",avatar:"J",color:"#EC4899",msg:"J'ai scale de 500 √† 2K‚Ç¨/jour cette semaine üî•",time:"14:35"},{user:"Karim_Drop",avatar:"K",color:"#F59E0B",msg:"Quelqu'un utilise CJ Dropshipping ?",time:"14:38"},{user:"Emma_SMMA",avatar:"E",color:"#10B981",msg:"Premier client √† 3K/mois sign√© ce matin !",time:"14:42"}],concours:[{user:"Focus Team",avatar:"F",color:"#D4AF37",msg:"üèÜ CONCOURS : Gagne 1 mois gratuit ! Partage ton meilleur conseil business",time:"Hier"},{user:"Lucas_Crypto",avatar:"L",color:"#8B5CF6",msg:"Mon conseil : Automatise tout ce qui peut l'√™tre üöÄ",time:"14:22"},{user:"Sophie_Drop",avatar:"S",color:"#F472B6",msg:"Toujours tester 10 produits minimum avant de scale",time:"15:05"}],chiffres:[{user:"Lucas_Crypto",avatar:"L",color:"#8B5CF6",msg:"üìä Store Shopify : 12,847‚Ç¨ ce mois. ATH battu !",time:"12:15"},{user:"Alex_SEO",avatar:"A",color:"#06B6D4",msg:"üí∞ Affiliation : 4,200‚Ç¨ en passif ce mois",time:"13:22"},{user:"Maxime_Auto",avatar:"M",color:"#EF4444",msg:"üöó Vente 911 : +18,000‚Ç¨ de marge nette",time:"15:45"},{user:"Emma_SMMA",avatar:"E",color:"#10B981",msg:"üíµ 3 clients sign√©s cette semaine : 7,500‚Ç¨/mois r√©current",time:"16:30"}],ecom:[{user:"Sophie_Drop",avatar:"S",color:"#F472B6",msg:"Quel agent vous utilisez pour les bijoux ?",time:"11:20"},{user:"Nathan_Ecom",avatar:"N",color:"#22C55E",msg:"J'ai trouv√© un winner en beaut√©, CTR √† 4.2%",time:"11:45"},{user:"Julie_Ecom",avatar:"J",color:"#EC4899",msg:"CJ ou Wiio pour les d√©lais de livraison ?",time:"12:30"},{user:"Karim_Drop",avatar:"K",color:"#F59E0B",msg:"Ma fiche produit convertit √† 3.8%, qui veut review ?",time:"14:15"}],ads:[{user:"Romain_Meta",avatar:"R",color:"#0081FB",msg:"ASC vs CBO sur du scale, vos retours ?",time:"10:30"},{user:"Manon_TikTok",avatar:"M",color:"#FE2C55",msg:"TikTok Ads explose en ce moment, CPM √† 2‚Ç¨",time:"10:55"},{user:"Thomas_Ads",avatar:"T",color:"#5865F2",msg:"Lookalike 1% vs 3% sur une audience froide ?",time:"11:20"},{user:"Alex_Google",avatar:"A",color:"#34a853",msg:"Performance Max vs Search pour du lead gen ?",time:"13:00"}],smma:[{user:"Emma_SMMA",avatar:"E",color:"#10B981",msg:"Comment vous g√©rez les clients difficiles ?",time:"09:30"},{user:"Pierre_Agency",avatar:"P",color:"#8B5CF6",msg:"Quel outil pour le reporting client ? Databox ?",time:"10:15"},{user:"Marie_SMMA",avatar:"M",color:"#EC4899",msg:"Combien vous facturez pour du Meta Ads management ?",time:"11:00"}],avis:[{user:"Nathan_Ecom",avatar:"N",color:"#22C55E",msg:"‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Focus m'a permis de passer de 0 √† 5K/mois en 3 mois",time:"10:00"},{user:"Sophie_Drop",avatar:"S",color:"#F472B6",msg:"La communaut√© est incroyable, toujours quelqu'un pour aider üôè",time:"14:30"},{user:"Romain_Meta",avatar:"R",color:"#0081FB",msg:"Les lives sont une mine d'or, j'ai optimis√© mes ads gr√¢ce √† Sonny",time:"16:00"}]},n={};k.forEach(e=>{const t=e.getAttribute("data-notif-count");n[t]=0});const q=e=>e==="Focus Team"?{cls:"admin",text:"ADMIN"}:e.includes("_Ecom")||e.includes("_Drop")?{cls:"ecom",text:"E-COM"}:e.includes("_Ads")||e.includes("_Meta")||e.includes("_TikTok")?{cls:"ads",text:"ADS"}:e.includes("_SMMA")?{cls:"smma",text:"SMMA"}:e.includes("_Crypto")?{cls:"crypto",text:"CRYPTO"}:e.includes("_SEO")?{cls:"seo",text:"SEO"}:e.includes("_Auto")?{cls:"auto",text:"AUTO"}:{cls:"member",text:"MEMBRE"},J=e=>{const t=e.user==="Focus Team",a=e.color||"#D4AF37",r=q(e.user),l=Math.floor(Math.random()*10)+1,j=Math.random()>.5,w=Math.floor(Math.random()*5)+1,m=document.createElement("div");m.className="message",m.style.cssText="display: flex; flex-direction: row; align-items: flex-start; gap: 12px; padding: 8px 0;";const g=document.createElement("div");g.className="msg-avatar"+(t?" admin-avatar":""),g.style.cssText=`
        width: 40px; height: 40px; min-width: 40px; min-height: 40px;
        border-radius: 50%; display: flex; align-items: center; justify-content: center;
        font-size: 14px; font-weight: 700; color: white; flex-shrink: 0;
        background-color: ${a};
      `,g.textContent=e.avatar,m.appendChild(g);const i=document.createElement("div");i.className="msg-content",i.style.cssText="flex: 1; min-width: 0; display: flex; flex-direction: column; gap: 4px;";const c=document.createElement("div");c.className="msg-header",c.style.cssText="display: flex; align-items: center; gap: 8px; flex-wrap: wrap;";const h=document.createElement("span");h.className="msg-author"+(t?" gold":""),h.style.cssText="font-weight: 600; font-size: 14px; color: "+(t?"var(--gold)":"var(--text-primary)")+";",h.textContent=e.user,c.appendChild(h);const M=document.createElement("span");M.className="role-badge "+r.cls,M.textContent=r.text,c.appendChild(M);const f=document.createElement("span");f.className="msg-time",f.style.cssText="font-size: 11px; color: var(--discord-text);",f.textContent=e.time,c.appendChild(f),i.appendChild(c);const C=document.createElement("div");C.className="msg-text",C.style.cssText="font-size: 14px; color: var(--text-secondary); line-height: 1.5;",C.textContent=e.msg,i.appendChild(C);const u=document.createElement("div");u.className="msg-reactions",u.style.cssText="display: flex; gap: 6px; margin-top: 4px; flex-wrap: wrap;";const d=document.createElement("span");if(d.className="reaction",d.dataset.count=l,d.innerHTML='üëç <span class="react-count">'+l+"</span>",d.onclick=function(){this.classList.toggle("reacted");const o=this.querySelector(".react-count");let p=parseInt(this.dataset.count);this.classList.contains("reacted")&&p++,this.dataset.count=p,o.textContent=p},u.appendChild(d),j){const o=document.createElement("span");o.className="reaction",o.dataset.count=w,o.innerHTML='üî• <span class="react-count">'+w+"</span>",o.onclick=function(){this.classList.toggle("reacted");const p=this.querySelector(".react-count");let A=parseInt(this.dataset.count);this.classList.contains("reacted")&&A++,this.dataset.count=A,p.textContent=A},u.appendChild(o)}return i.appendChild(u),m.appendChild(i),m},N=e=>{const t=B[e]||B.general;for(;s.firstChild;)s.removeChild(s.firstChild);t.forEach((a,r)=>{setTimeout(()=>{const l=J(a);l.style.animation="messageIn 0.3s ease",s.appendChild(l),s.scrollTop=s.scrollHeight},r*400)}),setTimeout(()=>{s.appendChild(E)},t.length*400+100)},O=e=>{const t=document.querySelector('[data-notif-count="'+e+'"]');t&&e!==D&&(n[e]=(n[e]||0)+Math.floor(Math.random()*3)+1,t.textContent=n[e]>99?"99+":n[e],t.classList.add("active"))},R=e=>{const t=document.querySelector('[data-notif-count="'+e+'"]');t&&(n[e]=0,t.textContent="0",t.classList.remove("active"))};L.forEach(e=>{e.addEventListener("click",()=>{const t=e.getAttribute("data-channel");if(!t)return;L.forEach(r=>r.classList.remove("active")),e.classList.add("active");const a=e.querySelector(".channel-name");a&&_&&(_.textContent=a.textContent||"g√©n√©ral"),D=t,N(t),R(t)})}),N("general"),F(()=>{E.classList.add("active"),setTimeout(()=>{E.classList.remove("active")},3e3)},6e3);const b=["annonce","programme","concours","presentation","ecom","ads","smma","chiffres","avis"];F(()=>{const e=b[Math.floor(Math.random()*b.length)];O(e)},2e3)});
