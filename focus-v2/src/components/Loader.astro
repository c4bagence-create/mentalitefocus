---
/**
 * Loader Component - Focus Business
 * Animation ultra premium avec logo SVG
 * Effets: draw, glow, particles, pulse
 */
---

<div id="loader">
  <!-- Background particles -->
  <div class="loader-particles">
    <span class="lp"></span><span class="lp"></span><span class="lp"></span>
    <span class="lp"></span><span class="lp"></span><span class="lp"></span>
    <span class="lp"></span><span class="lp"></span><span class="lp"></span>
    <span class="lp"></span><span class="lp"></span><span class="lp"></span>
  </div>

  <!-- Glow rings -->
  <div class="loader-rings">
    <div class="ring ring-1"></div>
    <div class="ring ring-2"></div>
    <div class="ring ring-3"></div>
  </div>

  <!-- Logo Container -->
  <div class="loader-logo">
    <!-- SVG Logo with draw animation -->
    <svg class="logo-svg" viewBox="0 0 685 226" fill="none" xmlns="http://www.w3.org/2000/svg">
      <!-- F -->
      <path class="logo-path path-f" d="M123.05 0V36.93H41.15V87.33L41.45 87.63H120.65V124.36H41.45L41.15 124.66V202.01L20.52 213.39L0.200012 225.56L0 28.35V8.38998C1 4.14998 4.13998 0.999979 8.38998 0.00997925H123.05V0Z"/>
      <!-- O -->
      <path class="logo-path path-o" d="M136.36 152.17C128.57 129.83 131.95 102.66 144.62 82.7301C171.03 41.2201 237.72 40.2801 264.04 82.3701C283.39 113.32 278.68 161.78 248.99 184.83C220.93 206.6 174.85 204.71 150.71 177.85C143.97 170.36 139.64 161.62 136.35 152.17H136.36ZM201.71 80.8901C154.25 83.5201 153.15 162.87 196.07 169.86C211.24 172.33 227.79 166.66 236.04 153.31C253.52 125 240.3 78.7501 201.72 80.8901H201.71Z"/>
      <!-- C -->
      <path class="logo-path path-c" d="M408.63 75.3098C412.79 80.9198 417.1 90.7198 418.14 97.6398C418.17 97.8598 418.33 98.3198 418.09 98.4898L387.93 105.38C383.85 95.0998 377.16 86.2198 366.19 82.8898C310.24 65.8898 303.2 175.91 359.43 170.23C374.37 168.72 384.21 157.78 389.13 144.31L419.06 152.31C419.18 153.82 418.49 155.28 417.98 156.68C405.26 191.42 368.74 207.55 333.59 196.3C306.15 187.52 290.15 165.08 287.47 136.79C284.51 105.49 295.02 74.4498 323.66 58.8398C351.02 43.9298 389.69 49.7898 408.62 75.3098H408.63Z"/>
      <!-- U -->
      <path class="logo-path path-u" d="M464.43 56.0901V139.23C465.78 158 473.35 169.52 493.3 169.26C513.25 169 519.96 157.99 522.34 139.99C524.34 124.86 523.2 108.02 523.15 92.7201C523.12 80.5101 523.2 68.2901 523.15 56.0801H556.11V195.4L523.55 195.51C523.13 195.27 523.18 194.92 523.14 194.52C522.86 191.66 522.79 183.91 523.14 181.13C523.22 180.53 523.57 180.38 523.67 180.06C523.98 179.01 522.82 179.64 522.35 180.15C520.83 181.82 519.64 184.7 518.15 186.53C504.98 202.73 478.43 202.38 460.75 194.59C437.59 184.39 431.36 165.01 430.85 141.23C430.63 130.81 430.89 120.27 430.87 109.89C430.84 91.9601 430.87 74.0201 430.87 56.0901H464.43Z"/>
      <!-- S -->
      <path class="logo-path path-s" d="M684.76 155.69C684.3 162.55 682.54 168.78 679 174.59C657.71 209.53 591.44 208.07 575.2 169.06C574.33 166.97 572.7 162.5 572.68 160.39C572.68 159.89 572.61 159.01 573.18 158.85L602.11 152.94C602.43 153.01 602.65 153.15 602.81 153.44C603.3 154.29 603.75 157.04 604.21 158.23C609.7 172.37 631.26 176.02 643.53 169.31C651.98 164.69 655.5 151.56 646.97 145.44C636.17 137.68 613.96 137.51 600.61 132.28C581.75 124.9 574.6 111.86 575.46 91.9201C577.08 54.4901 621.28 45.0201 650.93 55.0401C661.71 58.6801 673.82 66.5201 678.28 77.4101C679.44 80.2401 680.25 83.7801 680.92 86.5801C681.06 87.1801 681.451 89.5701 680.621 89.6301L651.91 95.3901C650.44 95.1601 648.581 90.6201 647.741 89.3701C641.341 79.8101 627.08 76.1101 616.42 79.7601C606.92 83.0101 604.5 94.3901 610.92 101.81C619.97 112.28 647.81 112.72 661.3 118.14C674.79 123.56 683.941 136.92 684.731 151.91V155.7L684.76 155.69Z"/>
      <!-- Corner -->
      <path class="logo-path path-corner" d="M8.39975 0C4.14975 1 1.00977 4.14001 0.00976562 8.38V0H8.39975Z"/>
    </svg>

    <!-- Glow overlay -->
    <div class="logo-glow"></div>
  </div>

  <!-- Tagline -->
  <div class="loader-tagline">
    <span class="tag-char">B</span>
    <span class="tag-char">U</span>
    <span class="tag-char">S</span>
    <span class="tag-char">I</span>
    <span class="tag-char">N</span>
    <span class="tag-char">E</span>
    <span class="tag-char">S</span>
    <span class="tag-char">S</span>
    <span class="tag-char">&nbsp;</span>
    <span class="tag-char">C</span>
    <span class="tag-char">L</span>
    <span class="tag-char">U</span>
    <span class="tag-char">B</span>
  </div>

  <!-- Progress bar -->
  <div class="loader-progress">
    <div class="progress-track">
      <div class="progress-fill"></div>
      <div class="progress-glow"></div>
    </div>
    <div class="progress-text">
      <span class="progress-percent" id="loader-percent">0</span>%
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const loader = document.getElementById('loader');
    const percentEl = document.getElementById('loader-percent');
    let progress = 0;
    
    // Animate percentage counter
    const updateProgress = () => {
      if (progress < 100) {
        progress += Math.random() * 15 + 5;
        if (progress > 100) progress = 100;
        if (percentEl) percentEl.textContent = Math.floor(progress).toString();
        
        if (progress < 100) {
          setTimeout(updateProgress, 100 + Math.random() * 150);
        }
      }
    };
    
    setTimeout(updateProgress, 200);

    // Hide loader after animations
    setTimeout(() => {
      loader?.classList.add('fade-out');
      
      setTimeout(() => {
        loader?.remove();
      }, 800);
    }, 2800);
  });
</script>

<style>
  #loader {
    position: fixed;
    inset: 0;
    background: #000;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 99999;
    overflow: hidden;
  }

  #loader.fade-out {
    animation: loaderFadeOut 0.8s ease forwards;
  }

  @keyframes loaderFadeOut {
    0% { opacity: 1; }
    50% { opacity: 1; transform: scale(1); }
    100% { opacity: 0; transform: scale(1.1); }
  }

  /* Particles */
  .loader-particles {
    position: absolute;
    inset: 0;
    overflow: hidden;
  }

  .lp {
    position: absolute;
    width: 4px;
    height: 4px;
    background: #D4AF37;
    border-radius: 50%;
    opacity: 0;
    animation: particleFloat 3s ease-in-out infinite;
  }

  .lp:nth-child(1) { left: 10%; top: 20%; animation-delay: 0s; }
  .lp:nth-child(2) { left: 20%; top: 80%; animation-delay: 0.2s; }
  .lp:nth-child(3) { left: 30%; top: 40%; animation-delay: 0.4s; }
  .lp:nth-child(4) { left: 40%; top: 60%; animation-delay: 0.6s; }
  .lp:nth-child(5) { left: 50%; top: 30%; animation-delay: 0.8s; }
  .lp:nth-child(6) { left: 60%; top: 70%; animation-delay: 1s; }
  .lp:nth-child(7) { left: 70%; top: 25%; animation-delay: 1.2s; }
  .lp:nth-child(8) { left: 80%; top: 55%; animation-delay: 1.4s; }
  .lp:nth-child(9) { left: 90%; top: 35%; animation-delay: 1.6s; }
  .lp:nth-child(10) { left: 15%; top: 50%; animation-delay: 1.8s; }
  .lp:nth-child(11) { left: 85%; top: 85%; animation-delay: 2s; }
  .lp:nth-child(12) { left: 45%; top: 15%; animation-delay: 2.2s; }

  @keyframes particleFloat {
    0%, 100% { 
      opacity: 0; 
      transform: translateY(0) scale(0.5); 
    }
    20% { 
      opacity: 0.8; 
      transform: translateY(-20px) scale(1); 
    }
    80% { 
      opacity: 0.6; 
      transform: translateY(-80px) scale(0.8); 
    }
  }

  /* Rings */
  .loader-rings {
    position: absolute;
    width: 400px;
    height: 400px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .ring {
    position: absolute;
    border-radius: 50%;
    border: 1px solid transparent;
  }

  .ring-1 {
    width: 250px;
    height: 250px;
    border-color: rgba(212, 175, 55, 0.1);
    animation: ringPulse 2s ease-in-out infinite;
  }

  .ring-2 {
    width: 320px;
    height: 320px;
    border-color: rgba(212, 175, 55, 0.05);
    animation: ringPulse 2s ease-in-out infinite 0.3s;
  }

  .ring-3 {
    width: 400px;
    height: 400px;
    border-color: rgba(212, 175, 55, 0.03);
    animation: ringPulse 2s ease-in-out infinite 0.6s;
  }

  @keyframes ringPulse {
    0%, 100% { transform: scale(0.95); opacity: 0.5; }
    50% { transform: scale(1.05); opacity: 1; }
  }

  /* Logo Container */
  .loader-logo {
    position: relative;
    width: 280px;
    height: 100px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  @media (min-width: 768px) {
    .loader-logo {
      width: 400px;
      height: 140px;
    }
  }

  .logo-svg {
    width: 100%;
    height: auto;
  }

  /* SVG Path Animations - Draw effect */
  .logo-path {
    fill: none;
    stroke: #D4AF37;
    stroke-width: 2;
    stroke-dasharray: 1000;
    stroke-dashoffset: 1000;
    animation: drawPath 1.5s ease forwards, fillPath 0.5s ease 1.5s forwards;
  }

  .path-f { animation-delay: 0s, 1.5s; }
  .path-o { animation-delay: 0.15s, 1.65s; }
  .path-c { animation-delay: 0.3s, 1.8s; }
  .path-u { animation-delay: 0.45s, 1.95s; }
  .path-s { animation-delay: 0.6s, 2.1s; }
  .path-corner { animation-delay: 0s, 1.5s; }

  @keyframes drawPath {
    to {
      stroke-dashoffset: 0;
    }
  }

  @keyframes fillPath {
    0% {
      fill: transparent;
      stroke: #D4AF37;
    }
    100% {
      fill: #D4AF37;
      stroke: #D4AF37;
    }
  }

  /* Logo Glow */
  .logo-glow {
    position: absolute;
    inset: -20px;
    background: radial-gradient(ellipse at center, rgba(212, 175, 55, 0.3) 0%, transparent 70%);
    opacity: 0;
    animation: glowPulse 1s ease 1.8s forwards;
    filter: blur(20px);
  }

  @keyframes glowPulse {
    0% { opacity: 0; transform: scale(0.8); }
    50% { opacity: 1; transform: scale(1.1); }
    100% { opacity: 0.6; transform: scale(1); }
  }

  /* Tagline */
  .loader-tagline {
    margin-top: 1.5rem;
    display: flex;
    gap: 0.125rem;
    font-family: 'Space Grotesk', sans-serif;
    font-size: 0.75rem;
    font-weight: 700;
    letter-spacing: 0.3em;
    color: rgba(255, 255, 255, 0.6);
  }

  .tag-char {
    opacity: 0;
    transform: translateY(10px);
    animation: tagCharIn 0.4s ease forwards;
  }

  .tag-char:nth-child(1) { animation-delay: 1.6s; }
  .tag-char:nth-child(2) { animation-delay: 1.65s; }
  .tag-char:nth-child(3) { animation-delay: 1.7s; }
  .tag-char:nth-child(4) { animation-delay: 1.75s; }
  .tag-char:nth-child(5) { animation-delay: 1.8s; }
  .tag-char:nth-child(6) { animation-delay: 1.85s; }
  .tag-char:nth-child(7) { animation-delay: 1.9s; }
  .tag-char:nth-child(8) { animation-delay: 1.95s; }
  .tag-char:nth-child(9) { animation-delay: 2s; }
  .tag-char:nth-child(10) { animation-delay: 2.05s; }
  .tag-char:nth-child(11) { animation-delay: 2.1s; }
  .tag-char:nth-child(12) { animation-delay: 2.15s; }
  .tag-char:nth-child(13) { animation-delay: 2.2s; }

  @keyframes tagCharIn {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Progress */
  .loader-progress {
    margin-top: 2.5rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.75rem;
  }

  .progress-track {
    position: relative;
    width: 200px;
    height: 2px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 2px;
    overflow: hidden;
  }

  .progress-fill {
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 0;
    background: linear-gradient(90deg, #8B7024, #D4AF37, #F5E6B8, #D4AF37);
    background-size: 200% 100%;
    border-radius: 2px;
    animation: progressFill 2.5s ease forwards, progressShimmer 1s linear infinite;
  }

  @keyframes progressFill {
    to { width: 100%; }
  }

  @keyframes progressShimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }

  .progress-glow {
    position: absolute;
    top: -4px;
    left: 0;
    height: 10px;
    width: 0;
    background: linear-gradient(90deg, transparent, rgba(212, 175, 55, 0.6), transparent);
    filter: blur(4px);
    animation: progressFill 2.5s ease forwards;
  }

  .progress-text {
    font-family: 'Space Grotesk', monospace;
    font-size: 0.625rem;
    font-weight: 700;
    color: rgba(255, 255, 255, 0.4);
    letter-spacing: 0.2em;
  }

  .progress-percent {
    color: #D4AF37;
    font-size: 0.75rem;
  }
</style>
